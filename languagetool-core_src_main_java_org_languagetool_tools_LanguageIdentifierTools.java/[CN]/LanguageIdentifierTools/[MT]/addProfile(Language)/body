{
  final String profileSuffix=".ngp";
  final String profileEncoding="UTF-8";
  try {
    final LanguageProfile profile=new LanguageProfile();
    final String languageCode=language.getShortName();
    final String detectionFile="/" + languageCode + "/"+ languageCode+ profileSuffix;
    if (!JLanguageTool.getDataBroker().resourceExists(detectionFile)) {
      return;
    }
    try (InputStream stream=JLanguageTool.getDataBroker().getFromResourceDirAsStream(detectionFile)){
      final InputStreamReader in=new InputStreamReader(stream,profileEncoding);
      final BufferedReader reader=new BufferedReader(in);
      String line=reader.readLine();
      while (line != null) {
        if (line.length() > 0 && !line.startsWith("#")) {
          final int space=line.indexOf(' ');
          profile.add(line.substring(0,space),Long.parseLong(line.substring(space + 1)));
        }
        line=reader.readLine();
      }
    }
     LanguageIdentifier.addProfile(languageCode,profile);
  }
 catch (  Exception e) {
    throw new RuntimeException("Failed trying to load language profile for language \"" + language + "\".",e);
  }
}
