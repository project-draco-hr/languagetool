{
  String content="How to move back and fourth from linux to xmb? Calcium deposits on eye lid.";
  Indexer.run(content,directory,Language.ENGLISH,false);
  searcher=new IndexSearcher(directory);
  Searcher errorSearcher=new Searcher();
  List<TopDocs> topDocs=errorSearcher.run("BACK_AND_FOURTH",JLanguageTool.getDataBroker().getFromRulesDirAsStream("/en/grammar.xml"),"/en/grammar.xml",searcher,true);
  assertEquals(1,topDocs.size());
  assertEquals(1,topDocs.get(0).totalHits);
  topDocs=errorSearcher.run("BACK_AND_FOURTH",JLanguageTool.getDataBroker().getFromRulesDirAsStream("/en/grammar.xml"),"/en/grammar.xml",searcher,false);
  assertEquals(1,topDocs.size());
  assertEquals(1,topDocs.get(0).totalHits);
  topDocs=errorSearcher.run("ALL_OVER_THE_WORD",JLanguageTool.getDataBroker().getFromRulesDirAsStream("/en/grammar.xml"),"/en/grammar.xml",searcher,true);
  assertEquals(1,topDocs.size());
  assertEquals(0,topDocs.get(0).totalHits);
  topDocs=errorSearcher.run("ALL_OVER_THE_WORD",JLanguageTool.getDataBroker().getFromRulesDirAsStream("/en/grammar.xml"),"/en/grammar.xml",searcher,false);
  assertEquals(1,topDocs.size());
  assertEquals(0,topDocs.get(0).totalHits);
  try {
    errorSearcher.run("Invalid Rule Id",JLanguageTool.getDataBroker().getFromRulesDirAsStream("/en/grammar.xml"),"/en/grammar.xml",searcher,true);
    fail("Exception should be thrown for invalid rule id.");
  }
 catch (  PatternRuleNotFoundException expected) {
    try {
      errorSearcher.run("Invalid Rule Id",JLanguageTool.getDataBroker().getFromRulesDirAsStream("/en/grammar.xml"),"/en/grammar.xml",searcher,false);
      fail("Exception should be thrown for invalid rule id.");
    }
 catch (    PatternRuleNotFoundException expected2) {
    }
  }
  try {
    errorSearcher.run("EYE_BROW",JLanguageTool.getDataBroker().getFromRulesDirAsStream("/en/grammar.xml"),"/en/grammar.xml",searcher,true);
    fail("Exception should be thrown for unsupported PatternRule");
  }
 catch (  IOException e) {
    assertTrue(e instanceof UnsupportedPatternRuleException);
    topDocs=errorSearcher.run("EYE_BROW",JLanguageTool.getDataBroker().getFromRulesDirAsStream("/en/grammar.xml"),"/en/grammar.xml",searcher,false);
    assertEquals(1,topDocs.size());
    assertEquals(1,topDocs.get(0).totalHits);
  }
  try {
    errorSearcher.run("ALL_FOR_NOT",JLanguageTool.getDataBroker().getFromRulesDirAsStream("/en/grammar.xml"),"/en/grammar.xml",searcher,true);
    fail("Exception should be thrown for unsupported PatternRule");
  }
 catch (  UnsupportedPatternRuleException expected) {
    topDocs=errorSearcher.run("ALL_FOR_NOT",JLanguageTool.getDataBroker().getFromRulesDirAsStream("/en/grammar.xml"),"/en/grammar.xml",searcher,false);
    assertEquals(1,topDocs.size());
    assertEquals(0,topDocs.get(0).totalHits);
  }
}
