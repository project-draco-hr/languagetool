{
  final HTTPServer server=new HTTPServer(new HTTPServerConfig(HTTPTools.getDefaultPort()),false);
  try {
    server.run();
    try {
      System.out.println("=== Testing 'missing language parameter' now, please ignore the following exception ===");
      final URL url=new URL("http://localhost:" + HTTPTools.getDefaultPort() + "/?text=foo");
      HTTPTools.checkAtUrl(url);
      fail();
    }
 catch (    IOException expected) {
      if (!expected.toString().contains(" 400 ")) {
        fail("Expected exception with error 400, got: " + expected);
      }
    }
  }
  finally {
    server.stop();
  }
}
