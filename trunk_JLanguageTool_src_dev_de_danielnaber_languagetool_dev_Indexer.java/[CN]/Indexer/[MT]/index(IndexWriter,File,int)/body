{
  if (dir.isDirectory()) {
    final File[] files=dir.listFiles();
    for (    File file : files) {
      index(iw,file,++count);
    }
  }
 else {
    final Document doc=new Document();
    if (count % 50 == 0)     System.out.println("Indexing file #" + count);
    String s=StringTools.readFile(new FileInputStream(dir.getAbsolutePath()),"iso-8859-1");
    s=getParagraphs(s);
    doc.add(new Field(BODY_FIELD,s,Field.Store.YES,Field.Index.TOKENIZED));
    iw.addDocument(doc);
  }
}
