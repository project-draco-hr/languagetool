{
  final File dir=new File(filename);
  if (!dir.isDirectory()) {
    throw new IllegalArgumentException(dir.getAbsolutePath() + " is not a directory, cannot use recursion");
  }
  final File[] files=dir.listFiles();
  for (int i=0; i < files.length; i++) {
    if (files[i].isDirectory()) {
      runRecursive(files[i].getAbsolutePath(),encoding);
    }
 else {
      runOnFile(files[i].getAbsolutePath(),encoding);
    }
  }
}
