{
  ArrayList<List<Token>> list=new ArrayList<List<Token>>();
  final ArrayList<Token> firstList=new ArrayList<Token>();
  list.add(firstList);
  int i=0;
  for (i=0; i < tokens.size(); i++) {
    if (isOrCompatible(tokens.get(i))) {
      firstList.add(tokens.get(i));
    }
 else {
      list.remove(firstList);
      ArrayList<CgSet> newSets=splitCgSet(tokens.get(i).target);
      for (      CgSet set : newSets) {
        Token newToken=new Token(tokens.get(i));
        newToken.target=expandSetSets(set);
        newToken.postags=newToken.target.getPostagsString();
        newToken.baseforms=newToken.target.getSingleTagBaseformsString();
        newToken.surfaceforms=newToken.target.getSingleTagSurfaceformsString();
        newToken.compositeTags=newToken.target.getCompositeTags();
        ArrayList<Token> newList=new ArrayList<Token>();
        for (        Token token : firstList) {
          newList.add(new Token(token));
        }
        newList.add(newToken);
        list.add(newList);
      }
      break;
    }
  }
  for (int j=i + 1; j < tokens.size(); j++) {
    for (int k=0; k < list.size(); k++) {
      ArrayList<Token> insideList=(ArrayList<Token>)list.get(k);
      insideList.add(tokens.get(j));
      list.set(k,insideList);
    }
  }
  return list;
}
