{
  final HashMap<String,PatternRule> complexRules=new HashMap<>();
  for (  final PatternRule rule : rules) {
    testCorrectSentences(languageTool,allRulesLanguageTool,lang,rule);
    testBadSentences(languageTool,allRulesLanguageTool,lang,complexRules,rule);
  }
  if (!complexRules.isEmpty()) {
    final Set<String> set=complexRules.keySet();
    final List<PatternRule> badRules=new ArrayList<>();
    for (    String aSet : set) {
      final PatternRule badRule=complexRules.get(aSet);
      if (badRule != null) {
        badRule.notComplexPhrase();
        badRule.setMessage("The rule contains a phrase that never matched any incorrect example.");
        badRules.add(badRule);
      }
    }
    if (!badRules.isEmpty()) {
      testGrammarRulesFromXML(badRules,languageTool,allRulesLanguageTool,lang);
    }
  }
}
