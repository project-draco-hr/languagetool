{
  validatePatternFile(lang);
  System.out.print("Running pattern rule tests for " + lang.getName() + "... ");
  final JLanguageTool languageTool=new MultiThreadedJLanguageTool(lang);
  if (CHECK_WITH_SENTENCE_SPLITTING) {
    languageTool.activateDefaultPatternRules();
    disableSpellingRules(languageTool);
  }
  final JLanguageTool allRulesLanguageTool=new MultiThreadedJLanguageTool(lang);
  allRulesLanguageTool.activateDefaultPatternRules();
  validateRuleIds(lang,allRulesLanguageTool);
  final List<PatternRule> rules=new ArrayList<>();
  for (  String patternRuleFileName : lang.getRuleFileNames()) {
    rules.addAll(languageTool.loadPatternRules(patternRuleFileName));
  }
  for (  PatternRule rule : rules) {
    PatternTestTools.warnIfRegexpSyntaxNotKosher(rule.getElements(),rule.getId(),rule.getSubId(),lang);
  }
  testGrammarRulesFromXML(rules,languageTool,allRulesLanguageTool,lang);
  System.out.println(rules.size() + " rules tested.");
}
