{
  Map map=new HashMap();
  FileInputStream fis=null;
  InputStreamReader isr=null;
  BufferedReader br=null;
  try {
    fis=new FileInputStream(filename);
    isr=new InputStreamReader(fis,FILE_ENCODING);
    br=new BufferedReader(isr);
    String line;
    while ((line=br.readLine()) != null) {
      line=line.trim();
      if (line.startsWith("#"))       continue;
      if (line.equals(""))       continue;
      String[] parts=line.split(":");
      if (parts.length != 2) {
        throw new IOException("Format error in file " + filename + ", line: "+ line);
      }
      String baseform=parts[0];
      String[] fullforms=parts[1].split(",");
      for (int i=0; i < fullforms.length; i++) {
        map.put(fullforms[i].trim(),baseform);
      }
    }
  }
  finally {
    if (br != null)     br.close();
    if (isr != null)     isr.close();
    if (fis != null)     fis.close();
  }
  return map;
}
