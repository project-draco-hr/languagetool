{
  final long startTime=System.currentTimeMillis();
  final int contextSize=DEFAULT_CONTEXT_SIZE;
  final List<RuleMatch> ruleMatches=new ArrayList<RuleMatch>();
  for (  StringPair srcAndTrg : reader) {
    List<RuleMatch> curMatches=checkBitext(srcAndTrg.getSource(),srcAndTrg.getTarget(),srcLt,trgLt,bRules);
    List<RuleMatch> fixedMatches=new ArrayList<RuleMatch>();
    for (    RuleMatch thisMatch : curMatches) {
      fixedMatches.add(trgLt.adjustRuleMatchPos(thisMatch,reader.getSentencePosition(),reader.getColumnCount(),reader.getLineCount(),reader.getCurrentLine()));
    }
    ruleMatches.addAll(fixedMatches);
    if (apiFormat) {
      final String xml=StringTools.ruleMatchesToXML(fixedMatches,reader.getCurrentLine(),contextSize,xmlMode);
      System.out.print(xml);
    }
 else {
      printMatches(fixedMatches,0,reader.getCurrentLine(),contextSize);
    }
  }
  if (xmlMode == StringTools.XmlPrintMode.NORMAL_XML) {
    displayTimeStats(startTime,srcLt.getSentenceCount(),apiFormat);
  }
  return ruleMatches.size();
}
