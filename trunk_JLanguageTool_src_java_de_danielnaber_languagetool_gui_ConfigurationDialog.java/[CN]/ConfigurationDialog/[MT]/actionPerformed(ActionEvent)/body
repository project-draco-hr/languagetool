{
  if (e.getActionCommand().equals(OK_BUTTON)) {
    int i=0;
    inactiveRuleIds.clear();
    for (    JCheckBox checkBox : checkBoxes) {
      if (!checkBox.isSelected()) {
        String ruleId=checkBoxesRuleIds.get(i);
        inactiveRuleIds.add(ruleId);
      }
      i++;
    }
    if (motherTongueBox.getSelectedItem() instanceof String)     motherTongue=null;
 else     motherTongue=(Language)motherTongueBox.getSelectedItem();
    serverMode=serverCheckbox.isSelected();
    serverPort=Integer.parseInt(serverPortField.getText());
    isClosed=true;
    dialog.setVisible(false);
  }
 else   if (e.getActionCommand().equals(CANCEL_BUTTON)) {
    isClosed=true;
    dialog.setVisible(false);
  }
}
