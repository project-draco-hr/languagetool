{
  if (e.getSource() == okButton) {
    int i=0;
    inactiveRuleIds.clear();
    for (    JCheckBox checkBox : checkBoxes) {
      if (!checkBox.isSelected()) {
        String ruleId=checkBoxesRuleIds.get(i);
        inactiveRuleIds.add(ruleId);
      }
      i++;
    }
    if (motherTongueBox.getSelectedItem() instanceof String)     motherTongue=null;
 else     motherTongue=(Language)motherTongueBox.getSelectedItem();
    if (serverCheckbox != null) {
      serverMode=serverCheckbox.isSelected();
      serverPort=Integer.parseInt(serverPortField.getText());
    }
    isClosed=true;
    dialog.setVisible(false);
  }
 else   if (e.getSource() == cancelButton) {
    isClosed=true;
    dialog.setVisible(false);
  }
}
