{
  frame=new JFrame("Language Tool Rule Converter");
  frame.addWindowListener(new CloseListener());
  frame.setJMenuBar(new MainMenuBar(this));
  setLookAndFeel();
  resultArea=new JTextArea();
  resultArea.setLineWrap(true);
  resultArea.setWrapStyleWord(true);
  resultArea.requestFocusInWindow();
  JScrollPane scrollPane=new JScrollPane(resultArea);
  scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
  scrollPane.setPreferredSize(new Dimension(250,145));
  scrollPane.setMinimumSize(new Dimension(10,10));
  rulesBox=new JComboBox();
  rulesBox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      displaySelectedRule();
      displayCoveredBy();
    }
  }
);
  ruleTypeBox=new JComboBox();
  ruleTypeBox.addItem(atdString);
  ruleTypeBox.addItem(cgString);
  ruleTypeBox.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      populateSpecificRuleType();
    }
  }
);
  specificRuleTypeBox=new JComboBox();
  populateSpecificRuleType();
  mainRuleFilePane=new JTextPane();
  mainRuleFilePane.setText(filename);
  mainRuleFilePane.setBorder(new LineBorder(Color.BLACK,1));
  convert=new JButton("Convert");
  convert.setMnemonic('C');
  convert.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      convertRuleFile();
      populateRuleBox();
    }
  }
);
  saveEditedRule=new JButton("Save rule");
  saveEditedRule.setMnemonic('S');
  saveEditedRule.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      saveEditedVisibleRule();
    }
  }
);
  writeRulesToFileButton=new JButton("Write rules to file");
  writeRulesToFileButton.setMnemonic('W');
  writeRulesToFileButton.addActionListener(this);
  coveredByPane=new JTextPane();
  coveredByPane.setBorder(new LineBorder(Color.BLACK,1));
  regularRules=new JCheckBox("Show regular rules",true);
  disambigRules=new JCheckBox("Show disambiguation rules",true);
  regularRules.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      populateRuleBox();
    }
  }
);
  disambigRules.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    ActionEvent e){
      populateRuleBox();
    }
  }
);
  writeCoveredRules=new JCheckBox("Write duplicate rules to file");
  checkRulesCoveredButton=new JButton("Check rule coverage");
  checkRulesCoveredButton.setMnemonic('E');
  checkRulesCoveredButton.addActionListener(this);
  final JLabel numRulesLabel=new JLabel("Number of rules:");
  numRulesPane=new JTextPane();
  numRulesPane.setText(Integer.toString(numberOfRules));
  final Container contentPane=frame.getContentPane();
  final GridBagLayout gridLayout=new GridBagLayout();
  contentPane.setLayout(gridLayout);
  final GridBagConstraints cons=new GridBagConstraints();
  cons.fill=GridBagConstraints.BOTH;
  final GridBagConstraints buttonCons=new GridBagConstraints();
  final JPanel insidePanel=new JPanel();
  insidePanel.setOpaque(true);
  insidePanel.setLayout(new GridBagLayout());
  insidePanel.setBorder(new LineBorder(Color.BLACK,1));
  buttonCons.fill=GridBagConstraints.BOTH;
  JPanel ruleTypePanel=new JPanel(new GridBagLayout());
  GridBagConstraints c=new GridBagConstraints();
  ruleTypePanel.add(new JLabel("Rule type:"),c);
  c.gridx=1;
  ruleTypePanel.add(ruleTypeBox,c);
  c.gridx=2;
  ruleTypePanel.add(specificRuleTypeBox,c);
  insidePanel.add(ruleTypePanel,buttonCons);
  JPanel displayRulesPanel=new JPanel(new GridBagLayout());
  c.gridx=0;
  displayRulesPanel.add(regularRules,c);
  c.gridx=1;
  displayRulesPanel.add(disambigRules,c);
  buttonCons.gridy=1;
  insidePanel.add(displayRulesPanel,buttonCons);
  JPanel convertPanel=new JPanel(new GridBagLayout());
  c.gridx=0;
  convertPanel.add(checkRulesCoveredButton,c);
  c.gridx=1;
  convertPanel.add(convert,c);
  buttonCons.gridy=2;
  buttonCons.fill=GridBagConstraints.NONE;
  insidePanel.add(convertPanel,buttonCons);
  JPanel savePanel=new JPanel(new GridBagLayout());
  c.gridx=0;
  savePanel.add(saveEditedRule,c);
  c.gridx=1;
  savePanel.add(writeRulesToFileButton,c);
  buttonCons.gridy=3;
  insidePanel.add(savePanel,buttonCons);
  buttonCons.gridy=4;
  insidePanel.add(writeCoveredRules,buttonCons);
  JPanel numRulesPanel=new JPanel(new GridBagLayout());
  c.gridx=0;
  numRulesPanel.add(numRulesLabel,c);
  c.gridx=1;
  numRulesPanel.add(numRulesPane,c);
  buttonCons.gridy=5;
  insidePanel.add(numRulesPanel,buttonCons);
  cons.gridx=0;
  cons.gridy=0;
  cons.ipadx=1;
  cons.ipady=1;
  JLabel ruleLabel=new JLabel("Original rule:");
  contentPane.add(ruleLabel,cons);
  cons.gridx=0;
  cons.gridy=2;
  JLabel convertedRuleLabel=new JLabel("Converted rule:");
  contentPane.add(convertedRuleLabel,cons);
  cons.gridx=0;
  cons.gridy=1;
  cons.weightx=10f;
  cons.weighty=2f;
  contentPane.add(rulesBox,cons);
  cons.gridx=0;
  cons.gridy=3;
  cons.weightx=10f;
  cons.weighty=10f;
  cons.ipady=150;
  scrollPane.setMinimumSize(new Dimension(0,200));
  contentPane.add(scrollPane,cons);
  cons.gridx=0;
  cons.gridy=4;
  cons.ipady=0;
  cons.ipadx=0;
  cons.weightx=0;
  cons.weighty=0;
  cons.anchor=GridBagConstraints.WEST;
  contentPane.add(new JLabel("Covered by:"),cons);
  cons.gridy=5;
  contentPane.add(coveredByPane,cons);
  cons.gridy=6;
  contentPane.add(insidePanel,cons);
  cons.gridx=0;
  cons.gridy=7;
  contentPane.add(new JLabel("Rule file:"),cons);
  cons.gridy=8;
  contentPane.add(mainRuleFilePane,cons);
  frame.pack();
  frame.setSize(WINDOW_WIDTH,WINDOW_HEIGHT);
}
