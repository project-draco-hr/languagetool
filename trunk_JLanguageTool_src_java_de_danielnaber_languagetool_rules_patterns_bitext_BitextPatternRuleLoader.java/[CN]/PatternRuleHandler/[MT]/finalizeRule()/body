{
  PatternRule rule=null;
  phraseElementInit();
  if (phraseElementList.isEmpty()) {
    rule=new PatternRule(id,language,elementList,description,"",shortMessage.toString());
    prepareRule(rule);
  }
 else {
    if (!elementList.isEmpty()) {
      for (      final ArrayList<Element> ph : phraseElementList) {
        ph.addAll(new ArrayList<Element>(elementList));
      }
    }
    for (    final ArrayList<Element> phraseElement : phraseElementList) {
      processElement(phraseElement);
      rule=new PatternRule(id,language,phraseElement,description,message.toString(),shortMessage.toString(),phraseElementList.size() > 1);
      prepareRule(rule);
    }
  }
  elementList.clear();
  if (phraseElementList != null) {
    phraseElementList.clear();
  }
  startPositionCorrection=0;
  endPositionCorrection=0;
  return rule;
}
