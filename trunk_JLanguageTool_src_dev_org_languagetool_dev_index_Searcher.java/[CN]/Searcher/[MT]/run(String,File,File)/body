{
  if (!xmlRuleFile.exists() || !xmlRuleFile.canRead()) {
    System.out.println("Rule XML file '" + xmlRuleFile.getAbsolutePath() + "' does not exist or is not readable, please check the path");
    System.exit(1);
  }
  final IndexSearcher searcher=new IndexSearcher(FSDirectory.open(indexDir));
  try {
    final List<TopDocs> matchesList=run(ruleId,xmlRuleFile,searcher,true);
    for (    TopDocs matches : matchesList) {
      printResult(matches,searcher,null);
    }
  }
 catch (  UnsupportedPatternRuleException e) {
    System.out.println(e.getMessage() + " Will run checking on potential matches (this can be slow):");
    final List<TopDocs> potentialMatchesList=run(ruleId,xmlRuleFile,searcher,false);
    final JLanguageTool languageTool=getLanguageToolWithOneRule(ruleId,xmlRuleFile);
    for (    TopDocs potentialMatches : potentialMatchesList) {
      printResult(potentialMatches,searcher,languageTool);
    }
  }
  searcher.close();
}
