{
  String shortMessage="";
  if (this.shortMessage != null && this.shortMessage.length() > 0) {
    shortMessage=this.shortMessage.toString();
  }
 else   if (shortMessageForRuleGroup != null && shortMessageForRuleGroup.length() > 0) {
    shortMessage=this.shortMessageForRuleGroup.toString();
  }
  if (numElement >= elemList.size()) {
    final PatternRule rule=new PatternRule(id,language,tmpElements,name,message.toString(),shortMessage,suggestionsOutMsg.toString(),phraseElementList.size() > 1);
    if (filterClassName != null && filterArgs != null) {
      RuleFilterCreator creator=new RuleFilterCreator();
      RuleFilter filter=creator.getFilter(filterClassName);
      rule.setFilter(filter);
      rule.setFilterArguments(filterArgs);
    }
    prepareRule(rule);
    rules.add(rule);
  }
 else {
    Element element=elemList.get(numElement);
    if (element.hasOrGroup()) {
      for (      Element elementOfOrGroup : element.getOrGroup()) {
        final List<Element> tmpElements2=new ArrayList<>();
        tmpElements2.addAll(tmpElements);
        tmpElements2.add((Element)ObjectUtils.clone(elementOfOrGroup));
        createRules(elemList,tmpElements2,numElement + 1);
      }
    }
    tmpElements.add((Element)ObjectUtils.clone(element));
    createRules(elemList,tmpElements,numElement + 1);
  }
}
