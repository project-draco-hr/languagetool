{
  try {
    if (str.contains("(?:") || str.contains("\\d") || str.contains("\\w")) {
      String termVal=term.text().replace("(?:","(").replace("\\d","[0-9]").replace("\\w","[a-zA-Z_0-9]");
      Term newTerm=new Term(term.field(),termVal);
      return new RegexpQuery(newTerm);
    }
    if (str.contains("?iu") || str.contains("?-i")) {
      return getFallbackRegexQuery(str);
    }
    return new RegexpQuery(term);
  }
 catch (  IllegalArgumentException e) {
    return getFallbackRegexQuery(str);
  }
}
