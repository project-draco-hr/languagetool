{
  boolean matched=false;
  if (testString) {
    matched=(isStringTokenMatched(token) ^ negation) && (isPosTokenMatched(token) ^ posNegation) && (!testWhitespace || isWhitespaceBefore(token));
  }
 else {
    matched=(!negation) && (isPosTokenMatched(token) ^ posNegation);
  }
  if (andGroupSet) {
    andGroupCheck[0]|=matched;
  }
  return matched;
}
