{
  if (currentFile == null || newFile) {
    JFileChooser jfc=new JFileChooser();
    jfc.setFileFilter(new PlainTextFileFilter());
    jfc.showSaveDialog(frame);
    File file=jfc.getSelectedFile();
    if (file == null) {
      return;
    }
    currentFile=file;
    updateTitle();
  }
  try (BufferedWriter writer=new BufferedWriter(new FileWriter(currentFile))){
    writer.write(textArea.getText());
  }
 catch (  IOException ex) {
    Tools.showError(ex);
  }
}
