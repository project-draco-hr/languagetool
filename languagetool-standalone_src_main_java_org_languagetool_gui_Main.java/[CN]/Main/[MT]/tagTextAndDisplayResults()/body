{
  final JLanguageTool langTool=ltSupport.getLanguageTool();
  final List<String> sentences=langTool.sentenceTokenize(textArea.getText());
  final StringBuilder sb=new StringBuilder();
  try {
    for (    String sent : sentences) {
      final AnalyzedSentence analyzedText=langTool.getAnalyzedSentence(sent);
      final String analyzedTextString=StringTools.escapeHTML(analyzedText.toString(",")).replace("&lt;S&gt;","&lt;S&gt;<br>").replace("[","<font color='" + TAG_COLOR + "'>[").replace("]","]</font><br>");
      sb.append(analyzedTextString).append("\n");
    }
  }
 catch (  Exception e) {
    sb.append(getStackTraceAsHtml(e));
  }
  SwingUtilities.invokeLater(new Runnable(){
    @Override public void run(){
      if (taggerDialog == null) {
        taggerDialog=new JDialog(frame);
        taggerDialog.setTitle(messages.getString("taggerWindowTitle"));
        taggerDialog.setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
        taggerDialog.setResizable(true);
        taggerDialog.setSize(640,480);
        taggerDialog.setLocationRelativeTo(frame);
        KeyStroke stroke=KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0);
        ActionListener actionListener=new ActionListener(){
          @Override public void actionPerformed(          ActionEvent actionEvent){
            taggerDialog.setVisible(false);
          }
        }
;
        taggerDialog.getRootPane().registerKeyboardAction(actionListener,stroke,JComponent.WHEN_IN_FOCUSED_WINDOW);
        JPanel panel=new JPanel(new GridBagLayout());
        taggerDialog.add(panel);
        taggerArea=new JTextPane();
        taggerArea.setContentType("text/html");
        taggerArea.setEditable(false);
        GridBagConstraints c=new GridBagConstraints();
        c.gridx=0;
        c.gridy=0;
        c.weightx=1.0;
        c.weighty=1.0;
        c.insets=new Insets(8,8,4,8);
        c.fill=GridBagConstraints.BOTH;
        panel.add(new JScrollPane(taggerArea),c);
        c.gridx=0;
        c.gridy=1;
        c.weightx=0.0;
        c.weighty=0.0;
        c.insets=new Insets(4,8,8,8);
        c.fill=GridBagConstraints.NONE;
        c.anchor=GridBagConstraints.EAST;
        JButton closeButton=new JButton(messages.getString("guiCloseButton"));
        closeButton.addActionListener(actionListener);
        panel.add(closeButton,c);
      }
      taggerDialog.setVisible(true);
      taggerArea.setText(HTML_FONT_START + sb.toString() + HTML_FONT_END);
    }
  }
);
}
