{
  InputStream inputStream=JLanguageTool.getDataBroker().getFromRulesDirAsStream("homophones.txt");
  ConfusionSetLoader confusionSetLoader;
  if (EVAL_MODE) {
    InputStream infoStream=JLanguageTool.getDataBroker().getFromRulesDirAsStream("homophones-info.txt");
    confusionSetLoader=new ConfusionSetLoader(infoStream,MIN_SENTENCES,MAX_ERROR_RATE);
  }
 else {
    confusionSetLoader=new ConfusionSetLoader();
  }
  confusionSet=confusionSetLoader.loadConfusionSet(inputStream);
  langTool=new JLanguageTool(new BritishEnglish());
  List<Rule> rules=langTool.getAllActiveRules();
  for (  Rule rule : rules) {
    langTool.disableRule(rule.getId());
  }
  languageModel=new LuceneLanguageModel(languageModelIndexDir);
  confusionRule=new EnglishConfusionProbabilityRule(JLanguageTool.getMessageBundle(),languageModel,new English());
  langTool.addRule(confusionRule);
}
