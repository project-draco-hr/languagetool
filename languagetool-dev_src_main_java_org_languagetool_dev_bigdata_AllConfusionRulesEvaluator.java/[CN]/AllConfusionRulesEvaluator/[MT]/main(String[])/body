{
  if (args.length < 3 || args.length > 4) {
    System.err.println("Usage: " + ConfusionRuleEvaluator.class.getSimpleName() + " <langCode> <languageModelTopDir> <wikipediaXml|tatoebaFile|dir>...");
    System.err.println("   <languageModelTopDir> is a directory with sub-directories '1grams', '2grams', and '3grams' with Lucene indexes");
    System.err.println("   <wikipediaXml|tatoebaFile|dir> either a Wikipedia XML dump, or a Tatoeba file or");
    System.err.println("                      a directory with example sentences (where <word>.txt contains only the sentences for <word>).");
    System.err.println("                      You can specify both a Wikipedia file and a Tatoeba file.");
    System.exit(1);
  }
  Language lang=Languages.getLanguageForShortName(args[0]);
  LanguageModel languageModel=new LuceneLanguageModel(new File(args[1]));
  List<String> inputsFiles=new ArrayList<>();
  inputsFiles.add(args[2]);
  if (args.length >= 4) {
    inputsFiles.add(args[3]);
  }
  ConfusionRuleEvaluator eval=new ConfusionRuleEvaluator(lang,languageModel,3);
  eval.setVerboseMode(false);
  ConfusionSetLoader confusionSetLoader=new ConfusionSetLoader();
  InputStream inputStream=JLanguageTool.getDataBroker().getFromResourceDirAsStream("/en/confusion_sets.txt");
  Map<String,List<ConfusionSet>> confusionSetMap=confusionSetLoader.loadConfusionSet(inputStream);
  Set<String> done=new HashSet<>();
  for (  List<ConfusionSet> entry : confusionSetMap.values()) {
    for (    ConfusionSet confusionSet : entry) {
      Set<ConfusionString> set=confusionSet.getSet();
      if (set.size() != 2) {
        System.out.println("Skipping confusion set with size != 2: " + confusionSet);
      }
 else {
        Iterator<ConfusionString> iterator=set.iterator();
        ConfusionString set1=iterator.next();
        ConfusionString set2=iterator.next();
        String word1=set1.getString();
        String word2=set2.getString();
        String key=word1 + " " + word2;
        if (!done.contains(key)) {
          String summary=eval.run(inputsFiles,word1,word2,confusionSet.getFactor(),MAX_SENTENCES);
          String summary1=set1.getDescription() != null ? word1 + "|" + set1.getDescription() : word1;
          String summary2=set2.getDescription() != null ? word2 + "|" + set2.getDescription() : word2;
          String start=summary1 + "; " + summary2+ "; "+ confusionSet.getFactor();
          String spaces=StringUtils.repeat(" ",82 - start.length());
          System.out.println(start + spaces + "# "+ summary);
        }
        done.add(key);
      }
    }
  }
}
