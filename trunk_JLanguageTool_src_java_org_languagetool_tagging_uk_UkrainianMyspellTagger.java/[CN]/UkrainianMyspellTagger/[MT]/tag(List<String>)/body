{
  final List<AnalyzedTokenReadings> tokenReadings=new ArrayList<AnalyzedTokenReadings>();
  int pos=0;
  if (wordsToPos == null) {
    wordsToPos=new HashMap<String,String[]>();
    final InputStream resourceFile=JLanguageTool.getDataBroker().getFromResourceDirAsStream(RESOURCE_FILENAME);
    final BufferedReader input=new BufferedReader(new InputStreamReader(resourceFile,Charset.forName("UTF-8")));
    final Pattern pattern1=Pattern.compile("[abcdefghijklmnop]+");
    final Pattern pattern2=Pattern.compile("[ABCDEFGHIJKLMN]+");
    final Pattern pattern3=Pattern.compile("[BDFHJLN]+");
    final Pattern pattern4=Pattern.compile("[UV]+");
    String line;
    while ((line=input.readLine()) != null) {
      line=line.trim();
      if (line.matches("^[0-9]") || line.length() == 0) {
        continue;
      }
      final String[] wrd=line.split("/");
      if (wrd.length > 1) {
        final String flags=wrd[1];
        final List<String> posTags=new ArrayList<String>();
        if (pattern1.matcher(flags).matches()) {
          posTags.add(IPOSTag.TAG_NOUN);
          if (flags.equals("b")) {
            posTags.add(IPOSTag.TAG_PLURAL);
          }
        }
 else         if (pattern2.matcher(flags).matches()) {
          posTags.add(IPOSTag.TAG_VERB);
          if (pattern3.matcher(flags).matches()) {
            posTags.add(IPOSTag.TAG_REFL);
          }
        }
 else         if (pattern4.matcher(flags).matches()) {
          posTags.add(IPOSTag.TAG_ADJ);
        }
        if (posTags.size() > 0) {
          wordsToPos.put(wrd[0],posTags.toArray(new String[0]));
        }
      }
    }
    input.close();
  }
  for (  final String word : sentenceTokens) {
    final List<AnalyzedToken> analyzedTokens=new ArrayList<AnalyzedToken>();
    final String[] posTags=wordsToPos.get(word);
    String[] lowerPosTags=null;
    if (posTags != null) {
      for (      String posTag : posTags)       analyzedTokens.add(new AnalyzedToken(word,posTag,word));
    }
 else {
      final String lowerWord=word.toLowerCase();
      if (!word.equals(lowerWord)) {
        lowerPosTags=wordsToPos.get(lowerWord);
        if (lowerPosTags != null) {
          for (          String lowerPosTag : lowerPosTags)           analyzedTokens.add(new AnalyzedToken(lowerWord,lowerPosTag,lowerWord));
        }
      }
    }
    if (posTags == null && lowerPosTags == null) {
      analyzedTokens.add(new AnalyzedToken(word,null,null));
    }
    tokenReadings.add(new AnalyzedTokenReadings(analyzedTokens.toArray(new AnalyzedToken[analyzedTokens.size()]),pos));
    pos+=word.length();
  }
  return tokenReadings;
}
