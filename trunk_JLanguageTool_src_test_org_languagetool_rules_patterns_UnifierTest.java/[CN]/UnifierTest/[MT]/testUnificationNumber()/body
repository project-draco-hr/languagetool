{
  final Unifier uni=new Unifier();
  final Element sgElement=new Element("",false,false,false);
  sgElement.setPosElement(".*[\\.:]sg:.*",true,false);
  uni.setEquivalence("number","singular",sgElement);
  final Element plElement=new Element("",false,false,false);
  plElement.setPosElement(".*[\\.:]pl:.*",true,false);
  uni.setEquivalence("number","plural",plElement);
  final AnalyzedToken sing1=new AnalyzedToken("ma??y","adj:sg:blahblah","ma??y");
  final AnalyzedToken sing2=new AnalyzedToken("cz??owiek","subst:sg:blahblah","cz??owiek");
  final Map<String,List<String>> equiv=new HashMap<String,List<String>>();
  final List<String> list1=new ArrayList<String>();
  list1.add("singular");
  equiv.put("number",list1);
  boolean satisfied=uni.isSatisfied(sing1,equiv);
  uni.startUnify();
  satisfied&=uni.isSatisfied(sing2,equiv);
  assertEquals(true,satisfied);
  uni.reset();
  AnalyzedToken sing1a=new AnalyzedToken("ma??y","adj:pl:blahblah","ma??y");
  satisfied=uni.isSatisfied(sing1,equiv);
  satisfied|=uni.isSatisfied(sing1a,equiv);
  uni.startUnify();
  satisfied&=uni.isSatisfied(sing2,equiv);
  assertEquals(true,satisfied);
  uni.reset();
  list1.add("plural");
  equiv.clear();
  equiv.put("number",list1);
  sing1a=new AnalyzedToken("ma??y","adj:pl:blahblah","ma??y");
  satisfied=uni.isSatisfied(sing1,equiv);
  satisfied|=uni.isSatisfied(sing1a,equiv);
  uni.startUnify();
  satisfied&=uni.isSatisfied(sing2,equiv);
  assertEquals(true,satisfied);
  uni.reset();
  sing1a=new AnalyzedToken("ma??y","adj:pl:blahblah","ma??y");
  equiv.clear();
  equiv.put("number",null);
  satisfied=uni.isSatisfied(sing1,equiv);
  satisfied|=uni.isSatisfied(sing1a,equiv);
  uni.startUnify();
  satisfied&=uni.isSatisfied(sing2,equiv);
  assertEquals(true,satisfied);
  uni.reset();
  satisfied=uni.isSatisfied(sing1a,equiv);
  uni.startUnify();
  satisfied&=uni.isSatisfied(sing2,equiv);
  assertEquals(false,satisfied);
  uni.reset();
}
