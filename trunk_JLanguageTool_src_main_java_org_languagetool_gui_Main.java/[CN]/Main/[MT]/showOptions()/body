{
  final Language currentLanguage=getCurrentLanguage();
  final JLanguageTool langTool=getCurrentLanguageTool(currentLanguage);
  final List<Rule> rules=langTool.getAllRules();
  final ConfigurationDialog configDialog=getCurrentConfigDialog(currentLanguage);
  configDialog.show(rules);
  config.setDisabledRuleIds(configDialog.getDisabledRuleIds());
  config.setEnabledRuleIds(configDialog.getEnabledRuleIds());
  config.setDisabledCategoryNames(configDialog.getDisabledCategoryNames());
  config.setMotherTongue(configDialog.getMotherTongue());
  config.setRunServer(configDialog.getRunServer());
  config.setUseGUIConfig(configDialog.getUseGUIConfig());
  config.setServerPort(configDialog.getServerPort());
  try {
    config.saveConfiguration(langTool.getLanguage());
  }
 catch (  final IOException e) {
    Tools.showError(e);
  }
  stopServer();
  maybeStartServer();
}
