{
  if (!isInTray) {
    final SystemTray tray=SystemTray.getSystemTray();
    final Image img=Toolkit.getDefaultToolkit().getImage(JLanguageTool.getDataBroker().getFromResourceDirAsUrl((tray.getTrayIconSize().height > 16) ? SYSTEM_TRAY_ICON_NAME : SYSTEM_TRAY_SMALL_ICON_NAME));
    final PopupMenu popup=makePopupMenu();
    try {
      final TrayIcon trayIcon=new TrayIcon(img,SYSTEM_TRAY_TOOLTIP,popup);
      trayIcon.addMouseListener(new TrayActionListener());
      tray.add(trayIcon);
    }
 catch (    AWTException e1) {
      Tools.showError(e1);
    }
  }
  isInTray=true;
  frame.setVisible(false);
}
