{
  Map<String,String> parameters;
  if ("post".equalsIgnoreCase(t.getRequestMethod())) {
    final InputStreamReader isr=new InputStreamReader(t.getRequestBody(),"utf-8");
    try {
      final BufferedReader br=new BufferedReader(isr);
      try {
        final String query=br.readLine();
        parameters=parseQuery(query);
      }
  finally {
        br.close();
      }
    }
  finally {
      isr.close();
    }
  }
 else {
    final String query=requestedUri.getRawQuery();
    parameters=parseQuery(query);
  }
  return parameters;
}
