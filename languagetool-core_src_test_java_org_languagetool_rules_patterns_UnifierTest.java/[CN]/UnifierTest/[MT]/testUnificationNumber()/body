{
  UnifierConfiguration unifierConfig=new UnifierConfiguration();
  unifierConfig.setEquivalence("number","singular",preparePOSElement(".*[\\.:]sg:.*"));
  unifierConfig.setEquivalence("number","plural",preparePOSElement(".*[\\.:]pl:.*"));
  Unifier uni=unifierConfig.createUnifier();
  AnalyzedToken sing1=new AnalyzedToken("ma??y","adj:sg:blahblah","ma??y");
  AnalyzedToken sing2=new AnalyzedToken("cz??owiek","subst:sg:blahblah","cz??owiek");
  Map<String,List<String>> equiv=new HashMap<>();
  List<String> list1=new ArrayList<>();
  list1.add("singular");
  equiv.put("number",list1);
  boolean satisfied=uni.isSatisfied(sing1,equiv);
  uni.startUnify();
  satisfied&=uni.isSatisfied(sing2,equiv);
  satisfied&=uni.getFinalUnificationValue(equiv);
  assertEquals(true,satisfied);
  uni.reset();
  AnalyzedToken sing1a=new AnalyzedToken("ma??y","adj:pl:blahblah","ma??y");
  satisfied=uni.isSatisfied(sing1,equiv);
  satisfied|=uni.isSatisfied(sing1a,equiv);
  uni.startUnify();
  satisfied&=uni.isSatisfied(sing2,equiv);
  satisfied&=uni.getFinalUnificationValue(equiv);
  assertEquals(true,satisfied);
  uni.reset();
  list1.add("plural");
  equiv.clear();
  equiv.put("number",list1);
  sing1a=new AnalyzedToken("ma??y","adj:pl:blahblah","ma??y");
  satisfied=uni.isSatisfied(sing1,equiv);
  satisfied|=uni.isSatisfied(sing1a,equiv);
  uni.startUnify();
  satisfied&=uni.isSatisfied(sing2,equiv);
  satisfied&=uni.getFinalUnificationValue(equiv);
  assertEquals(true,satisfied);
  uni.reset();
  sing1a=new AnalyzedToken("ma??y","adj:pl:blahblah","ma??y");
  equiv.clear();
  equiv.put("number",null);
  satisfied=uni.isSatisfied(sing1,equiv);
  satisfied|=uni.isSatisfied(sing1a,equiv);
  uni.startUnify();
  satisfied&=uni.isSatisfied(sing2,equiv);
  satisfied&=uni.getFinalUnificationValue(equiv);
  assertEquals(true,satisfied);
  uni.reset();
  satisfied=uni.isSatisfied(sing1a,equiv);
  uni.startUnify();
  satisfied&=uni.isSatisfied(sing2,equiv);
  satisfied&=uni.getFinalUnificationValue(equiv);
  assertEquals(false,satisfied);
  uni.reset();
}
