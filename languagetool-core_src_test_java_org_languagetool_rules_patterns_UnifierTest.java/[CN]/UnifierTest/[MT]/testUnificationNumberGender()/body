{
  final UnifierConfiguration unifierConfig=new UnifierConfiguration();
  final PatternToken sgPatternToken=new PatternToken("",false,false,false);
  sgPatternToken.setPosElement(".*[\\.:]sg:.*",true,false);
  unifierConfig.setEquivalence("number","singular",sgPatternToken);
  final PatternToken plPatternToken=new PatternToken("",false,false,false);
  plPatternToken.setPosElement(".*[\\.:]pl:.*",true,false);
  unifierConfig.setEquivalence("number","plural",plPatternToken);
  final PatternToken femPatternToken=new PatternToken("",false,false,false);
  femPatternToken.setPosElement(".*[\\.:]f",true,false);
  unifierConfig.setEquivalence("gender","feminine",femPatternToken);
  final PatternToken mascPatternToken=new PatternToken("",false,false,false);
  mascPatternToken.setPosElement(".*[\\.:]m",true,false);
  unifierConfig.setEquivalence("gender","masculine",mascPatternToken);
  final Unifier uni=unifierConfig.createUnifier();
  final AnalyzedToken sing1=new AnalyzedToken("ma??y","adj:sg:blahblah:m","ma??y");
  final AnalyzedToken sing1a=new AnalyzedToken("ma??a","adj:sg:blahblah:f","ma??y");
  final AnalyzedToken sing1b=new AnalyzedToken("ma??e","adj:pl:blahblah:m","ma??y");
  final AnalyzedToken sing2=new AnalyzedToken("cz??owiek","subst:sg:blahblah:m","cz??owiek");
  final Map<String,List<String>> equiv=new HashMap<>();
  equiv.put("number",null);
  equiv.put("gender",null);
  boolean satisfied=uni.isSatisfied(sing1,equiv);
  satisfied|=uni.isSatisfied(sing1a,equiv);
  satisfied|=uni.isSatisfied(sing1b,equiv);
  uni.startUnify();
  satisfied&=uni.isSatisfied(sing2,equiv);
  uni.startNextToken();
  satisfied&=uni.getFinalUnificationValue(equiv);
  assertEquals(true,satisfied);
  assertEquals("[ma??y[ma??y/adj:sg:blahblah:m*], cz??owiek[cz??owiek/subst:sg:blahblah:m*]]",Arrays.toString(uni.getUnifiedTokens()));
  uni.reset();
}
