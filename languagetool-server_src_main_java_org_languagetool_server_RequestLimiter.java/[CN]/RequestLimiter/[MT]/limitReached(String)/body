{
  int requestsByIp=0;
  Date thresholdDate=new Date(System.currentTimeMillis() - requestLimitPeriodInSeconds * 1000);
  Iterator<RequestEvent> iterator=requestEvents.iterator();
  while (iterator.hasNext()) {
    RequestEvent requestEvent=iterator.next();
    if (requestEvent.ip.equals(ipAddress) && requestEvent.date.after(thresholdDate)) {
      requestsByIp++;
      if (requestsByIp > requestLimit) {
        return true;
      }
    }
  }
  return false;
}
