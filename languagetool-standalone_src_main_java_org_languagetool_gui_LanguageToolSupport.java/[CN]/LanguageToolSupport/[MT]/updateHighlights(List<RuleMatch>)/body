{
  List<Span> spans=new ArrayList<>();
  for (  RuleMatch match : matches) {
    createSpan(spans,match);
  }
  prepareUpdateHighlights(matches,spans);
}
