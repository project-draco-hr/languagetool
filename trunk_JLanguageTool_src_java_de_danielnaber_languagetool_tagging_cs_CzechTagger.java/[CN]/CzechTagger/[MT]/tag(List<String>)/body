{
  List<AnalyzedToken> taggerTokens;
  List<AnalyzedToken> lowerTaggerTokens;
  List<AnalyzedToken> upperTaggerTokens;
  final List<AnalyzedTokenReadings> tokenReadings=new ArrayList<AnalyzedTokenReadings>();
  int pos=0;
  if (morfologik == null) {
    final URL url=JLanguageTool.getDataBroker().getFromResourceDirAsUrl(RESOURCE_FILENAME);
    morfologik=new DictionaryLookup(Dictionary.read(url));
  }
  for (  String word : sentenceTokens) {
    final List<AnalyzedToken> l=new ArrayList<AnalyzedToken>();
    final String lowerWord=word.toLowerCase(csLocale);
    taggerTokens=asAnalyzedTokenList(word,morfologik.lookup(word));
    lowerTaggerTokens=asAnalyzedTokenList(word,morfologik.lookup(lowerWord));
    final boolean isLowercase=word.equals(lowerWord);
    addTokens(taggerTokens,l);
    if (!isLowercase) {
      addTokens(lowerTaggerTokens,l);
    }
    if (lowerTaggerTokens.isEmpty() && taggerTokens.isEmpty()) {
      if (isLowercase) {
        upperTaggerTokens=asAnalyzedTokenList(word,morfologik.lookup(StringTools.uppercaseFirstChar(word)));
        if (!upperTaggerTokens.isEmpty()) {
          addTokens(upperTaggerTokens,l);
        }
 else {
          l.add(new AnalyzedToken(word,null,null));
        }
      }
 else {
        l.add(new AnalyzedToken(word,null,null));
      }
    }
    tokenReadings.add(new AnalyzedTokenReadings(l,pos));
    pos+=word.length();
  }
  return tokenReadings;
}
