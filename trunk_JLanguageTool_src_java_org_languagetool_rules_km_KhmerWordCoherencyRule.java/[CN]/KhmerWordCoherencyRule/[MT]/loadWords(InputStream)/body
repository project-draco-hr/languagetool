{
  final Map<String,String> map=new HashMap<String,String>();
  InputStreamReader isr=null;
  BufferedReader br=null;
  try {
    isr=new InputStreamReader(file,getEncoding());
    br=new BufferedReader(isr);
    String line;
    while ((line=br.readLine()) != null) {
      line=line.trim();
      if (line.length() < 1) {
        continue;
      }
      if (line.charAt(0) == '#') {
        continue;
      }
      final String[] parts=line.split("=");
      if (parts.length < 2) {
        throw new IOException("Format error in file - Make sure you have removed the Unicode BOM as well as check for other errors: " + JLanguageTool.getDataBroker().getFromRulesDirAsUrl(getFileName()) + ", line: "+ line);
      }
      for (int i=0; i < parts.length - 1; i++) {
        map.put(parts[i],parts[parts.length - 1]);
      }
    }
  }
  finally {
    if (br != null) {
      br.close();
    }
    if (isr != null) {
      isr.close();
    }
  }
  return map;
}
