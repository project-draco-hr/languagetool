{
  InputStreamReader isr=null;
  BufferedReader br=null;
  FileInputStream fis=null;
  StringBuffer sb=new StringBuffer();
  try {
    fis=new FileInputStream(filename);
    if (encoding != null)     isr=new InputStreamReader(fis,encoding);
 else     isr=new InputStreamReader(fis);
    br=new BufferedReader(isr);
    String line;
    while ((line=br.readLine()) != null) {
      sb.append(line);
      sb.append("\n");
    }
  }
  finally {
    if (br != null)     br.close();
    if (isr != null)     isr.close();
    if (fis != null)     fis.close();
  }
  return sb.toString();
}
