{
  final PatternRuleLoader ruleLoader=new PatternRuleLoader();
  final List<PatternRule> rules=ruleLoader.getRules(ruleXMLStream,"test.xml");
  ruleXMLStream.close();
  PatternRule theRule=null;
  for (  PatternRule rule : rules) {
    if (rule.getId().equals(ruleId)) {
      theRule=rule;
      break;
    }
  }
  if (theRule == null) {
    throw new PatternRuleNotFoundException(ruleId);
  }
  final Query query=PatternRuleQueryBuilder.buildQuery(theRule,true);
  return searcher.search(query,MAX_HITS);
}
