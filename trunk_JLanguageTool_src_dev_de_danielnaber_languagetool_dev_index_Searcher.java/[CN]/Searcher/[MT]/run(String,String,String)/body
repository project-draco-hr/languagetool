{
  final PatternRuleLoader ruleLoader=new PatternRuleLoader();
  final File xml=new File(ruleXML);
  if (!xml.exists() || !xml.canRead()) {
    System.out.println("Rule XML file '" + xml.getAbsolutePath() + "' does not exist or is not readable, please check the path");
    System.exit(1);
  }
  final InputStream is=new FileInputStream(xml);
  final List<PatternRule> rules=ruleLoader.getRules(is,ruleXML);
  is.close();
  PatternRule theRule=null;
  for (  PatternRule rule : rules) {
    if (rule.getId().equals(ruleId)) {
      theRule=rule;
      break;
    }
  }
  if (theRule == null) {
    System.out.println("Can not find rule '" + ruleId + "'");
    System.exit(1);
  }
  final Query query=PatternRuleQueryBuilder.buildQuery(theRule);
  final IndexSearcher searcher=new IndexSearcher(FSDirectory.open(new File(indexDir)));
  final TopDocs docs=searcher.search(query,100);
  final ScoreDoc[] hits=docs.scoreDocs;
  System.out.println("Search results: " + docs.totalHits);
  for (int i=0; i < docs.totalHits; ) {
    final Document d=searcher.doc(hits[i].doc);
    i++;
    System.out.println(i + ": " + d.get(PatternRuleQueryBuilder.FIELD_NAME));
  }
  searcher.close();
}
