{
  final LanguageIdentifier langIdentifier=new LanguageIdentifier(text);
  Language lang;
  try {
    lang=Language.getLanguageForShortName(langIdentifier.getLanguage());
  }
 catch (  IllegalArgumentException e) {
    lang=Language.AMERICAN_ENGLISH;
  }
  if (lang.hasVariant()) {
    lang=lang.getDefaultVariant();
  }
  languageBox.selectLanguage(lang);
  return lang;
}
