{
  if (!exceptionSet || tokenElement == null) {
    tokenElement=new Element(StringTools.trimWhitespace(elements.toString()),caseSensitive,regExpression,tokenInflected);
    tokenElement.setNegation(tokenNegated);
  }
 else {
    tokenElement.setStringElement(StringTools.trimWhitespace(elements.toString()));
  }
  if (skipPos != 0) {
    tokenElement.setSkipNext(skipPos);
    skipPos=0;
  }
  if (minOccurrence == 0) {
    tokenElement.setMinOccurrence(0);
  }
  if (maxOccurrence != 1) {
    tokenElement.setMaxOccurrence(maxOccurrence);
    maxOccurrence=1;
  }
  if (posToken != null) {
    tokenElement.setPosElement(posToken,posRegExp,posNegation);
    posToken=null;
  }
  if (chunkTag != null) {
    tokenElement.setChunkElement(chunkTag);
    chunkTag=null;
  }
  if (tokenReference != null) {
    tokenElement.setMatch(tokenReference);
  }
  if (inAndGroup && andGroupCounter > 0) {
    elementList.get(elementList.size() - 1).setAndGroupElement(tokenElement);
  }
 else   if (inOrGroup && orGroupCounter > 0) {
    elementList.get(elementList.size() - 1).setOrGroupElement(tokenElement);
  }
 else {
    if (minOccurrence < 1) {
      elementList.add(tokenElement);
    }
    for (int i=1; i <= minOccurrence; i++) {
      elementList.add(tokenElement);
    }
    minOccurrence=1;
  }
  if (inAndGroup) {
    andGroupCounter++;
  }
  if (inOrGroup) {
    orGroupCounter++;
  }
  if (inUnification) {
    tokenElement.setUnification(equivalenceFeatures);
  }
  tokenElement.setInsideMarker(inMarker);
  if (inUnificationDef) {
    language.getUnifierConfiguration().setEquivalence(uFeature,uType,tokenElement);
    elementList.clear();
  }
  if (tokenSpaceBeforeSet) {
    tokenElement.setWhitespaceBefore(tokenSpaceBefore);
  }
  resetToken();
}
