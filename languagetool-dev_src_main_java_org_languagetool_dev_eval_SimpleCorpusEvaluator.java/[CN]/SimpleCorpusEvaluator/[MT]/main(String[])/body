{
  if (args.length != 2) {
    System.out.println("Usage: " + SimpleCorpusEvaluator.class.getSimpleName() + " <corpusFile> <languageModelDir>");
    System.out.println("   [languageModel] is a Lucene index directory with ngram frequency information");
    System.exit(1);
  }
  File inputFile=new File(args[0]);
  File languageModelTopDir=new File(args[1]);
  System.out.println("Running with language model from " + languageModelTopDir);
  SimpleCorpusEvaluator evaluator=new SimpleCorpusEvaluator(languageModelTopDir);
  List<String> results=new ArrayList<>();
  double threshold=START_THRESHOLD;
  while (threshold >= END_THRESHOLD) {
    probabilityRule.setMinProbability(threshold);
    PrecisionRecall res=evaluator.run(inputFile);
    String thresholdStr=String.format(Locale.ENGLISH,"%.20f",threshold);
    double fMeasure=FMeasure.getFMeasure(res.getPrecision(),res.getRecall(),1.0f);
    String fMeasureStr=String.format(Locale.ENGLISH,"%.3f",fMeasure);
    String precision=String.format(Locale.ENGLISH,"%.3f",res.getPrecision());
    String recall=String.format(Locale.ENGLISH,"%.3f",res.getRecall());
    results.add(thresholdStr + ": f=" + fMeasureStr+ ", precision="+ precision+ ", recall="+ recall);
    threshold=threshold * 0.1;
  }
  System.out.println("=== Results: ==================================");
  for (  String result : results) {
    System.out.println(result);
  }
  evaluator.close();
}
