{
  if (namespaceURI == null)   namespaceURI=null;
  if (lName == null)   lName=null;
  if (qName.equals("rules")) {
    String languageStr=attrs.getValue("lang");
    language=Language.getLanguageforShortName(languageStr);
    if (language == null) {
      throw new SAXException("Unknown language '" + languageStr + "'");
    }
  }
 else   if (qName.equals("rule")) {
    id=attrs.getValue("id");
    if (inRuleGroup && id == null)     id=ruleGroupId;
    description=attrs.getValue("name");
    if (inRuleGroup && description == null)     description=ruleGroupDescription;
    correctExamples=new ArrayList();
    incorrectExamples=new ArrayList();
  }
 else   if (qName.equals("pattern")) {
    pattern=new StringBuffer();
    inPattern=true;
    if (attrs.getValue("mark_from") != null)     startPositionCorrection=Integer.parseInt(attrs.getValue("mark_from"));
    if (attrs.getValue("mark_to") != null)     endPositionCorrection=Integer.parseInt(attrs.getValue("mark_to"));
    if (attrs.getValue("case_sensitive") != null && attrs.getValue("case_sensitive").equals("yes"))     caseSensitive=true;
  }
 else   if (qName.equals("token")) {
    inToken=true;
    if (attrs.getValue("negate") != null) {
      tokenNegated=attrs.getValue("negate").equals("yes");
    }
    if (attrs.getValue("inflected") != null) {
      tokenInflected=attrs.getValue("inflected").equals("yes");
    }
    elements=new StringBuffer();
    if (elementList == null) {
      elementList=new ArrayList();
    }
    if (attrs.getValue("postag") != null) {
      if (attrs.getValue("postag_exceptions") != null) {
        exceptions=attrs.getValue("postag_exceptions").split("\\|");
      }
 else {
        exceptions=null;
      }
      String[] pos=new String[1];
      pos[0]=attrs.getValue("postag");
      if (attrs.getValue("postag_regexp") != null) {
        regular=attrs.getValue("postag_regexp").equals("yes");
      }
      POSElement posElement=new POSElement(pos,caseSensitive,regular,exceptions);
      if (attrs.getValue("negate_pos") != null) {
        posElement.setNegation(attrs.getValue("negate_pos").equals("yes"));
      }
      if (elementList == null) {
        elementList=new ArrayList();
      }
      elementList.add(posElement);
      inToken=false;
    }
    if (attrs.getValue("regexp") != null) {
      regExpression=attrs.getValue("regexp").equals("yes");
    }
  }
 else   if (qName.equals("example") && attrs.getValue("type").equals("correct")) {
    inCorrectExample=true;
    correctExample=new StringBuffer();
  }
 else   if (qName.equals("example") && attrs.getValue("type").equals("incorrect")) {
    inIncorrectExample=true;
    incorrectExample=new StringBuffer();
  }
 else   if (qName.equals("message")) {
    inMessage=true;
    message=new StringBuffer();
  }
 else   if (qName.equals("rulegroup")) {
    ruleGroupId=attrs.getValue("id");
    ruleGroupDescription=attrs.getValue("name");
    inRuleGroup=true;
  }
 else   if (qName.equals("em") && inMessage) {
    message.append("<em>");
  }
}
