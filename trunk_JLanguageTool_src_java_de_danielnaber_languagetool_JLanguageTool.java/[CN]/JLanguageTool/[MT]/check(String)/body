{
  SentenceTokenizer sTokenizer=new SentenceTokenizer();
  List sentences=sTokenizer.tokenize(s);
  List ruleMatches=new ArrayList();
  List allRules=getAllRules();
  printIfVerbose(allRules.size() + " rules activated for language " + language);
  int tokenCount=0;
  int lineCount=0;
  for (Iterator iter=sentences.iterator(); iter.hasNext(); ) {
    String sentence=(String)iter.next();
    AnalyzedSentence analyzedText=getAnalyzedText(sentence);
    printIfVerbose(analyzedText.toString());
    for (Iterator iterator=allRules.iterator(); iterator.hasNext(); ) {
      Rule rule=(Rule)iterator.next();
      if (disabledRules.contains(rule.getId()))       continue;
      RuleMatch[] thisMatches=rule.match(analyzedText);
      for (int i=0; i < thisMatches.length; i++) {
        RuleMatch thisMatch=new RuleMatch(thisMatches[i].getRule(),thisMatches[i].getFromPos() + tokenCount,thisMatches[i].getToPos() + tokenCount,thisMatches[i].getMessage());
        String sentencePartToError=sentence.substring(0,thisMatches[i].getFromPos());
        thisMatch.setLine(lineCount + countLineBreaks(sentencePartToError));
        ruleMatches.add(thisMatch);
      }
    }
    tokenCount+=sentence.length();
    lineCount+=countLineBreaks(sentence);
  }
  return ruleMatches;
}
