{
  if (url == null) {
    return url;
  }
  String originalURLProtocol=url.getProtocol();
  if (!"jar".equalsIgnoreCase(originalURLProtocol)) {
    return url;
  }
  String originalURLString=url.toString();
  int bangSlashIndex=originalURLString.indexOf("!/");
  if (bangSlashIndex > -1) {
    return url;
  }
  String originalURLPath=url.getPath();
  URLConnection urlConnection;
  try {
    urlConnection=url.openConnection();
    if (urlConnection == null) {
      throw new IOException("urlConnection is null");
    }
  }
 catch (  IOException e) {
    return url;
  }
  Permission urlConnectionPermission;
  try {
    urlConnectionPermission=urlConnection.getPermission();
    if (urlConnectionPermission == null) {
      throw new IOException("urlConnectionPermission is null");
    }
  }
 catch (  IOException e) {
    return url;
  }
  String urlConnectionPermissionName=urlConnectionPermission.getName();
  if (urlConnectionPermissionName == null) {
    return url;
  }
  File file=new File(urlConnectionPermissionName);
  if (file.exists() == false) {
    return url;
  }
  String newURLStr;
  try {
    newURLStr="jar:" + file.toURI().toURL().toExternalForm() + "!/"+ originalURLPath;
  }
 catch (  MalformedURLException e) {
    return url;
  }
  try {
    url=new URL(newURLStr);
  }
 catch (  MalformedURLException e) {
    return url;
  }
  return url;
}
