{
  BufferedReader srxReader=null;
  try {
    srxReader=new BufferedReader(new InputStreamReader(JLanguageTool.getDataBroker().getFromResourceDirAsStream(RULES),"utf-8"));
    Map<String,Object> parserParameters=new HashMap<String,Object>();
    parserParameters.put(Srx2SaxParser.VALIDATE_PARAMETER,true);
    SrxParser srxParser=new Srx2SaxParser(parserParameters);
    SrxDocument document=srxParser.parse(srxReader);
    return document;
  }
 catch (  IOException e) {
    throw new RuntimeException("Could not load rules " + RULES + " from resource dir "+ JLanguageTool.getDataBroker().getResourceDir(),e);
  }
 finally {
    if (srxReader != null) {
      try {
        srxReader.close();
      }
 catch (      IOException e) {
        System.err.println("Error closing SRX file reader.");
      }
    }
  }
}
