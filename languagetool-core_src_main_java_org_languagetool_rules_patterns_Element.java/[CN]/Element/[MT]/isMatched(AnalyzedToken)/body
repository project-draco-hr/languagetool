{
  if (testWhitespace && !isWhitespaceBefore(token)) {
    return false;
  }
  final boolean matched;
  if (testString) {
    matched=(isStringTokenMatched(token) ^ negation) && (isPosTokenMatched(token) ^ posNegation) && isChunkTokenMatched(token);
  }
 else {
    matched=(!negation) && (isPosTokenMatched(token) ^ posNegation) && isChunkTokenMatched(token);
  }
  return matched;
}
