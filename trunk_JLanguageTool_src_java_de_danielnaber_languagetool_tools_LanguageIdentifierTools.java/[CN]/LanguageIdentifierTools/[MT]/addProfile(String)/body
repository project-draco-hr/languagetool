{
  final String PROFILE_SUFFIX=".ngp";
  final String PROFILE_ENCODING="UTF-8";
  try {
    LanguageProfile profile=new LanguageProfile();
    final String languageFilePath=JLanguageTool.getDataBroker().getResourceDir() + "/" + language+ "/"+ language+ PROFILE_SUFFIX;
    InputStream stream=JLanguageTool.class.getResourceAsStream(languageFilePath);
    try {
      BufferedReader reader=new BufferedReader(new InputStreamReader(stream,PROFILE_ENCODING));
      String line=reader.readLine();
      while (line != null) {
        if (line.length() > 0 && !line.startsWith("#")) {
          int space=line.indexOf(' ');
          profile.add(line.substring(0,space),Long.parseLong(line.substring(space + 1)));
        }
        line=reader.readLine();
      }
    }
  finally {
      stream.close();
    }
    LanguageIdentifier.addProfile(language,profile);
  }
 catch (  Throwable t) {
    throw new Exception("Failed trying to load language profile for language \"" + language + "\". Error: "+ t.getMessage());
  }
}
