{
  final JLanguageTool langTool=getCurrentLanguageTool();
  final List<Rule> rules=langTool.getAllRules();
  final ConfigurationDialog configDialog=getCurrentConfigDialog();
  configDialog.show(rules);
  config.setDisabledRuleIds(configDialog.getDisabledRuleIds());
  config.setEnabledRuleIds(configDialog.getEnabledRuleIds());
  config.setDisabledCategoryNames(configDialog.getDisabledCategoryNames());
  config.setMotherTongue(configDialog.getMotherTongue());
  config.setRunServer(configDialog.getRunServer());
  config.setUseGUIConfig(configDialog.getUseGUIConfig());
  config.setServerPort(configDialog.getServerPort());
  try {
    config.saveConfiguration();
  }
 catch (  final IOException e) {
    Tools.showError(e);
  }
  stopServer();
  maybeStartServer();
}
