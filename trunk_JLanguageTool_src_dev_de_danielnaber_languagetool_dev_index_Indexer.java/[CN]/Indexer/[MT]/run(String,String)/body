{
  final File file=new File(textFile);
  if (!file.exists() || !file.canRead()) {
    System.out.println("Text file '" + file.getAbsolutePath() + "' does not exist or is not readable, please check the path");
    System.exit(1);
  }
  System.out.println("Indexing to directory '" + indexDir + "'...");
  final Directory dir=FSDirectory.open(new File(indexDir));
  final Language language=Language.ENGLISH;
  final Analyzer analyzer=new LanguageToolAnalyzer(Version.LUCENE_31,new JLanguageTool(language));
  final IndexWriterConfig iwc=new IndexWriterConfig(Version.LUCENE_31,analyzer);
  iwc.setOpenMode(OpenMode.CREATE);
  final IndexWriter writer=new IndexWriter(dir,iwc);
  final BufferedReader reader=new BufferedReader(new FileReader(file));
  final StringBuffer buffer=new StringBuffer();
  String line="";
  while ((line=reader.readLine()) != null) {
    buffer.append(line);
  }
  final String content=buffer.toString();
  final SentenceTokenizer sentenceTokenizer=language.getSentenceTokenizer();
  final List<String> sentences=sentenceTokenizer.tokenize(content);
  for (  String sentence : sentences) {
    final Document doc=new Document();
    doc.add(new Field(PatternRuleQueryBuilder.FIELD_NAME,sentence,Store.YES,Index.ANALYZED));
    writer.addDocument(doc);
  }
  writer.close();
  System.out.println("Index complete!");
}
