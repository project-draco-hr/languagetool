{
  InputStreamReader isr;
  String charsetName=encoding != null ? encoding : Charset.defaultCharset().name();
  InputStream is=System.in;
  if (!isStdIn(filename)) {
    is=new FileInputStream(new File(filename));
  }
  isr=new InputStreamReader(new BufferedInputStream(is),charsetName);
  return isr;
}
