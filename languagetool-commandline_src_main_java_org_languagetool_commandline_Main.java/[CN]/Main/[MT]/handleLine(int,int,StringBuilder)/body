{
  int matches=matchNo;
  if (applySuggestions) {
    System.out.print(Tools.correctText(StringTools.filterXML(sb.toString()),lt));
  }
 else   if (profileRules) {
    matches+=Tools.profileRulesOnLine(StringTools.filterXML(sb.toString()),lt,currentRule);
  }
 else   if (!taggerOnly) {
    if (matches == 0) {
      matches+=CommandLineTools.checkText(StringTools.filterXML(sb.toString()),lt,apiFormat,-1,lineOffset,matches,StringTools.XmlPrintMode.START_XML);
    }
 else {
      matches+=CommandLineTools.checkText(StringTools.filterXML(sb.toString()),lt,apiFormat,-1,lineOffset,matches,StringTools.XmlPrintMode.CONTINUE_XML);
    }
  }
 else {
    CommandLineTools.tagText(StringTools.filterXML(sb.toString()),lt);
  }
  return matches;
}
