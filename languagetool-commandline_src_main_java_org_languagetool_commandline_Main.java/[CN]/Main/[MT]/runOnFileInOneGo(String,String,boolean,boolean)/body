{
  if (bitextMode) {
    final TabBitextReader reader=new TabBitextReader(filename,encoding);
    if (applySuggestions) {
      CommandLineTools.correctBitext(reader,srcLt,lt,bRules);
    }
 else {
      CommandLineTools.checkBitext(reader,srcLt,lt,bRules,apiFormat);
    }
  }
 else {
    final String text=getFilteredText(filename,encoding,xmlFiltering);
    if (applySuggestions) {
      System.out.print(Tools.correctText(text,lt));
    }
 else     if (profileRules) {
      CommandLineTools.profileRulesOnText(text,lt);
    }
 else     if (!taggerOnly) {
      CommandLineTools.checkText(text,lt,apiFormat,0);
    }
 else {
      CommandLineTools.tagText(text,lt);
    }
    if (apiFormat) {
      System.out.println("<!--");
    }
    if (listUnknownWords) {
      System.out.println("Unknown words: " + lt.getUnknownWords());
    }
    if (apiFormat) {
      System.out.println("-->");
    }
  }
}
