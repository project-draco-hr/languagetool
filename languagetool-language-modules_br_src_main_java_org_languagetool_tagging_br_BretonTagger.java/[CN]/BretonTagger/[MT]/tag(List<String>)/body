{
  List<AnalyzedToken> taggerTokens;
  List<AnalyzedToken> lowerTaggerTokens;
  List<AnalyzedToken> upperTaggerTokens;
  final List<AnalyzedTokenReadings> tokenReadings=new ArrayList<AnalyzedTokenReadings>();
  int pos=0;
  if (dictLookup == null) {
    final URL url=JLanguageTool.getDataBroker().getFromResourceDirAsUrl(getFileName());
    dictLookup=new DictionaryLookup(Dictionary.read(url));
  }
  Matcher matcher;
  for (  String word : sentenceTokens) {
    String probeWord=word;
    for (; ; ) {
      final List<AnalyzedToken> l=new ArrayList<AnalyzedToken>();
      final String lowerWord=probeWord.toLowerCase(conversionLocale);
      taggerTokens=asAnalyzedTokenList(word,dictLookup.lookup(probeWord));
      lowerTaggerTokens=asAnalyzedTokenList(word,dictLookup.lookup(lowerWord));
      final boolean isLowercase=probeWord.equals(lowerWord);
      addTokens(taggerTokens,l);
      if (!isLowercase) {
        addTokens(lowerTaggerTokens,l);
      }
      if (lowerTaggerTokens.isEmpty() && taggerTokens.isEmpty()) {
        if (isLowercase) {
          upperTaggerTokens=asAnalyzedTokenList(word,dictLookup.lookup(StringTools.uppercaseFirstChar(probeWord)));
          if (!upperTaggerTokens.isEmpty()) {
            addTokens(upperTaggerTokens,l);
          }
        }
        if (l.isEmpty()) {
          if ((matcher=patternSuffix.matcher(probeWord)).find()) {
            probeWord=matcher.group(1);
            continue;
          }
          l.add(new AnalyzedToken(word,null,null));
        }
      }
      tokenReadings.add(new AnalyzedTokenReadings(l,pos));
      pos+=word.length();
      break;
    }
  }
  return tokenReadings;
}
