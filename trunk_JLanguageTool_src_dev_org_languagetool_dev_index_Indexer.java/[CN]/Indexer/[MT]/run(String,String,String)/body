{
  final File file=new File(textFile);
  if (!file.exists() || !file.canRead()) {
    System.out.println("Text file '" + file.getAbsolutePath() + "' does not exist or is not readable, please check the path");
    System.exit(1);
  }
  final BufferedReader reader=new BufferedReader(new FileReader(file));
  System.out.println("Indexing to directory '" + indexDir + "'...");
  final FSDirectory directory=FSDirectory.open(new File(indexDir));
  try {
    final Language language=Language.getLanguageForShortName(languageCode);
    if (language == null) {
      throw new RuntimeException("Unknown language code '" + languageCode + "'");
    }
    final Indexer indexer=new Indexer(directory,language);
    try {
      run(reader,indexer,false);
    }
  finally {
      indexer.close();
    }
  }
  finally {
    directory.close();
  }
  System.out.println("Index complete!");
}
