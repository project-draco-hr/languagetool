{
switch (qName) {
case RULE:
    trgRule.setMessage(message.toString());
  if (suggestionMatches != null) {
    for (    final Match m : suggestionMatches) {
      trgRule.addSuggestionMatch(m);
    }
    if (phraseElementList.size() <= 1) {
      suggestionMatches.clear();
    }
  }
final BitextPatternRule bRule=new BitextPatternRule(srcRule,trgRule);
bRule.setCorrectBitextExamples(correctExamples);
bRule.setIncorrectBitextExamples(incorrectExamples);
bRule.setSourceLang(srcLang);
rules.add(bRule);
break;
case SRC_EXAMPLE:
srcExample=setExample();
break;
case TRG_EXAMPLE:
trgExample=setExample();
break;
case SOURCE:
srcRule=finalizeRule();
break;
case TARGET:
trgRule=finalizeRule();
break;
case EXAMPLE:
if (inCorrectExample) {
correctExamples.add(new StringPair(srcExample.getExample(),trgExample.getExample()));
}
 else if (inIncorrectExample) {
final StringPair examplePair=new StringPair(srcExample.getExample(),trgExample.getExample());
if (trgExample.getCorrections() == null) {
incorrectExamples.add(new IncorrectBitextExample(examplePair));
}
 else {
final List<String> corrections=trgExample.getCorrections();
incorrectExamples.add(new IncorrectBitextExample(examplePair,corrections));
}
}
inCorrectExample=false;
inIncorrectExample=false;
break;
default :
super.endElement(namespaceURI,sName,qName);
break;
}
}
