{
  final PatternRuleQueryBuilder queryBuilder=new PatternRuleQueryBuilder();
  Query query;
  try {
    query=queryBuilder.buildQuery(patternRule);
    fail();
  }
 catch (  UnsupportedPatternRuleException e) {
    query=queryBuilder.buildPossiblyRelaxedQuery(patternRule);
  }
  final int matches=searcher.search(query,null,1000).totalHits;
  assertEquals("Query failed: " + query,expectedMatches,matches);
}
