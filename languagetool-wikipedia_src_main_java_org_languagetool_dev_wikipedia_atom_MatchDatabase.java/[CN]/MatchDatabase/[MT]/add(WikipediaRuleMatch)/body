{
  String sql="INSERT INTO feed_matches (title, language_code, rule_id, rule_sub_id, rule_message, rule_category, error_context, edit_date, diff_id) " + "VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)";
  try (PreparedStatement prepSt=conn.prepareStatement(sql)){
    prepSt.setString(1,StringUtils.abbreviate(ruleMatch.getTitle(),255));
    prepSt.setString(2,ruleMatch.getLanguage().getShortName());
    prepSt.setString(3,ruleMatch.getRule().getId());
    if (ruleMatch.getRule() instanceof PatternRule) {
      prepSt.setString(4,((PatternRule)ruleMatch.getRule()).getSubId());
    }
 else {
      prepSt.setString(4,null);
    }
    prepSt.setString(5,StringUtils.abbreviate(ruleMatch.getMessage(),255));
    if (ruleMatch.getRule().getCategory() != null) {
      prepSt.setString(6,StringUtils.abbreviate(ruleMatch.getRule().getCategory().getName(),255));
    }
 else {
      prepSt.setString(6,"<no category>");
    }
    prepSt.setString(7,ruleMatch.getErrorContext());
    prepSt.setTimestamp(8,new Timestamp(ruleMatch.getEditDate().getTime()));
    prepSt.setLong(9,ruleMatch.getDiffId());
    prepSt.execute();
  }
 catch (  SQLException e) {
    throw new RuntimeException("Could not add rule match " + ruleMatch + " to database",e);
  }
}
