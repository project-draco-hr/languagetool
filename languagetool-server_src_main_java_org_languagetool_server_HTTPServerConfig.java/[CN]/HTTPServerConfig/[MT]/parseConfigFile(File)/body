{
  try {
    final Properties props=new Properties();
    try (FileInputStream fis=new FileInputStream(file)){
      props.load(fis);
      maxTextLength=Integer.parseInt(getOptionalProperty(props,"maxTextLength",Integer.toString(Integer.MAX_VALUE)));
      maxCheckTimeMillis=Long.parseLong(getOptionalProperty(props,"maxCheckTimeMillis","-1"));
      requestLimit=Integer.parseInt(getOptionalProperty(props,"requestLimit","0"));
      requestLimitPeriodInSeconds=Integer.parseInt(getOptionalProperty(props,"requestLimitPeriodInSeconds","0"));
      String langModel=getOptionalProperty(props,"languageModel",null);
      if (langModel != null) {
        languageModelDir=new File(langModel);
        if (!languageModelDir.exists() || !languageModelDir.isDirectory()) {
          throw new RuntimeException("LanguageModel directory not found or is not a directory: " + languageModelDir);
        }
      }
      maxCheckThreads=Integer.parseInt(getOptionalProperty(props,"maxCheckThreads","10"));
      if (maxCheckThreads < 1) {
        throw new IllegalArgumentException("Invalid value for maxCheckThreads: " + maxCheckThreads);
      }
      mode=getOptionalProperty(props,"mode","LanguageTool").equalsIgnoreCase("AfterTheDeadline") ? Mode.AfterTheDeadline : Mode.LanguageTool;
      if (mode == Mode.AfterTheDeadline) {
        atdLanguage=Language.getLanguageForShortName(getProperty(props,"afterTheDeadlineLanguage",file));
      }
    }
   }
 catch (  IOException e) {
    throw new RuntimeException("Could not load properties from '" + file + "'",e);
  }
}
