{
  List<RuleMatch> ruleMatches=new ArrayList<RuleMatch>();
  AnalyzedTokenReadings[] tokens=text.getTokensWithoutWhitespace();
  int pos=0;
  for (int i=0; i < tokens.length; i++) {
    String posToken=tokens[i].getAnalyzedToken(0).getPOSTag();
    if (posToken != null && posToken.equals(JLanguageTool.SENTENCE_START_TAGNAME))     continue;
    AnalyzedGermanTokenReadings analyzedToken=(AnalyzedGermanTokenReadings)tokens[i];
    boolean isRelevantPronomen=analyzedToken.hasReadingOfType(POSType.PRONOMEN);
    if (i > 0 && tokens[i - 1].getToken().equalsIgnoreCase("vor") && tokens[i].getToken().equalsIgnoreCase("allem"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("er") || tokens[i].getToken().equalsIgnoreCase("sie") || tokens[i].getToken().equalsIgnoreCase("es"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("ich"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("du"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("dessen"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("deren"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("sich"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("unser"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("aller"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("man"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("beiden"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("wessen"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("a"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("alle"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("etwas"))     isRelevantPronomen=false;
 else     if (tokens[i].getToken().equalsIgnoreCase("was"))     isRelevantPronomen=false;
    boolean ignore=couldBeRelativeClause(tokens,i);
    if ((analyzedToken.hasReadingOfType(POSType.DETERMINER) || isRelevantPronomen) && !ignore) {
      int tokenPos=i + 1;
      if (tokenPos >= tokens.length)       break;
      AnalyzedGermanTokenReadings nextToken=(AnalyzedGermanTokenReadings)tokens[tokenPos];
      nextToken=maybeAddAdjectiveReadings(nextToken,tokens,tokenPos);
      if (nextToken.hasReadingOfType(POSType.ADJEKTIV)) {
        tokenPos=i + 2;
        if (tokenPos >= tokens.length)         break;
        AnalyzedGermanTokenReadings nextNextToken=(AnalyzedGermanTokenReadings)tokens[tokenPos];
        if (nextNextToken.hasReadingOfType(POSType.NOMEN)) {
          RuleMatch ruleMatch=checkDetAdjNounAgreement((AnalyzedGermanTokenReadings)tokens[i],nextToken,(AnalyzedGermanTokenReadings)tokens[i + 2]);
          if (ruleMatch != null)           ruleMatches.add(ruleMatch);
        }
      }
 else       if (nextToken.hasReadingOfType(POSType.NOMEN)) {
        RuleMatch ruleMatch=checkDetNounAgreement((AnalyzedGermanTokenReadings)tokens[i],(AnalyzedGermanTokenReadings)tokens[i + 1]);
        if (ruleMatch != null)         ruleMatches.add(ruleMatch);
      }
    }
    pos+=tokens[i].getToken().length();
  }
  return toRuleMatchArray(ruleMatches);
}
