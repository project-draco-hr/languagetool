{
  ensureCorrectUsageOrExit(args);
  final long startTime=System.currentTimeMillis();
  final String[] ruleIds=args[0].split(",");
  final String languageCode=args[1];
  final Language language=Language.getLanguageForShortName(languageCode);
  final File indexDir=new File(args[2]);
  if (args.length > 3 && "--no_limit".equals(args[3])) {
    limitSearch=false;
  }
  final Searcher searcher=new Searcher(new SimpleFSDirectory(indexDir));
  if (!limitSearch) {
    searcher.setMaxHits(100000);
  }
  for (  String ruleId : ruleIds) {
    final long ruleStartTime=System.currentTimeMillis();
    for (    PatternRule rule : searcher.getRuleById(ruleId,language)) {
      final SearcherResult searcherResult=searcher.findRuleMatchesOnIndex(rule,language);
      int i=1;
      if (searcherResult.getMatchingSentences().size() == 0) {
        System.out.println("[no matches]");
      }
      for (      MatchingSentence ruleMatch : searcherResult.getMatchingSentences()) {
        System.out.println(i + ": " + ruleMatch.getSentence()+ " (Source: "+ ruleMatch.getSource()+ ")");
        i++;
      }
      System.out.println("Time: " + (System.currentTimeMillis() - ruleStartTime) + "ms");
      System.out.println("==============================================================");
    }
  }
  System.out.println("Total time: " + (System.currentTimeMillis() - startTime) + "ms");
}
